#Mongodb知识总结

##介绍
### 1. 关系型数据库ACID原则
```bash
1.A(Atomic)原子性
要不都执行，要不都不执行，数据保持原子性操作，不可分割
例如 A给B转100元，A-100,B+100,当B+100数据库操作失败时，A-100的操作也不提交事务
2.C(Consistence)一致性
数据必须保持一致性
3.I(Isolation)
#隔离级别：（读未提交，读已提交，可重复读，序列化）
4.D(Durability)
#持久化，防止数据丢失

```
### 2. CAP定理(布鲁尔定理)
```bash
一致性（所有节点在同一时间点有相同的数据）

可用性（保证每个请求不管成功或者失败都有响应）

分区容错性（系统中的任意信息的丢失或者失败不会影响系统的继续运作）

CAP核心：一个分布式系统不能很好的满足CAP理论，最多只能较好的满足两个，
Base理论：对可用性和一致性的弱要求
Basically Availble :基本可用
Soft-state 软状态，柔性事务
Eventual Consistency:最终一致性 ACID的目的

CA:单点集群，满足一致性和可用性系统，通常在扩展性上不太强
CP:满足一致性和分区容错性，通常在性能上不是特别高
AP:满足可用性和分区容错性，通常在一致性不是特别高
```
![](.Mongdb总结_images/6a4bf953.png)

### 3. MongoDB介绍
```bash
MongoDB是一个基于分布式文件存储的数据库，文档型数据库。支持的数据非常松散，类似于Json和Bson格式，支持建立
索引。特点：
  （1）面向集合存储，易于存储对象类型的数据
  （2）模式自由
  （3）支持动态查询
  （4）支持完全索引，包含内部对象
  （5）支持查询
  （6）支持复制和故障恢复
  （7）使用高效的二进制数据存储，包含大对象
  （8）自动处理碎片，支持云计算层次的扩展
  （9）支持存储格式为Bson

```
MongoDB多个站点部署，主要的应用场景：
```bash
（1）网站实时数据处理，非常适合实时的插入，更新，查询，并具备网站实时数据存储的所需的复制及高度伸缩性
（2）缓存。由于性能很高，适合作为信息基础设施的缓存层。
（3）高度伸缩性场景
```
MongoDB不适合场景：
```bash
（1）高度事务性系统
（2）传统的商业智能
（3）复杂的跨文档（表）级联查询
```

MongoDB增删查改
```bash
略....
```
MongoDB聚合
```bash
用于处理处理数据，计算平均值，求和
语法：db.Collection_name.aggrate(条件)
例如：db.mycol.aggregate([{$group : {_id : "$sex", avgAge : {$avg : "$age"}}}])
计算以性别分组的平均年龄
```



